"use strict";var map,restaurant=void 0;window.initMap=function(){fetchRestaurantFromURL(function(e,n){e?console.error(e):(self.map=new google.maps.Map(document.getElementById("map"),{zoom:16,center:n.latlng,scrollwheel:!1}),fillBreadcrumb(),DBHelper.mapMarkerForRestaurant(self.restaurant,self.map))})};var fetchRestaurantFromURL=function(t){if(self.restaurant)t(null,self.restaurant);else{var e=getParameterByName("id");e?DBHelper.fetchRestaurantById(e,function(e,n){(self.restaurant=n)?(fillRestaurantHTML(),t(null,n)):console.error(e)}):(error="No restaurant id in URL",t(error,null))}},fillRestaurantHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant;document.getElementById("restaurant-name").innerHTML=e.name,document.getElementById("restaurant-address").innerHTML=e.address;var n=document.getElementById("restaurant-img"),t=document.getElementById("restaurant-figcap");n.className="restaurant-img",n.src=DBHelper.imageUrlForRestaurant(e),n.alt="An impression of restaurant "+e.name,t.innerHTML="Restaurant "+e.name;var r=n.src.slice(0,-17);n.srcset=r+"-250_small-min.webp 250w,\n                  "+r+"-400_medium-min.webp 400w,\n                  "+r+"-600_large-min.webp 600w,\n                  "+r+"-800_orig-min.webp 800w\n                  ",n.sizes="90vw",document.getElementById("restaurant-cuisine").innerHTML=e.cuisine_type,e.operating_hours&&fillRestaurantHoursHTML(),fillReviewsHTML()},fillRestaurantHoursHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant.operating_hours,n=document.getElementById("restaurant-hours");for(var t in e){var r=document.createElement("tr"),a=document.createElement("td");a.innerHTML=t,r.appendChild(a);var i=document.createElement("td");i.innerHTML=e[t],r.appendChild(i),n.appendChild(r)}},fillReviewsHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant.reviews,n=document.getElementById("reviews-container");if(n.childNodes.length<4){var t=document.createElement("h2");t.innerHTML="Reviews",n.appendChild(t)}if(!e){var r=document.createElement("p");return r.innerHTML="No reviews yet!",void n.appendChild(r)}var a=document.getElementById("reviews-list");e.forEach(function(e){a.appendChild(createReviewHTML(e))}),n.appendChild(a)},createReviewHTML=function(e){var n=document.createElement("li"),t=document.createElement("p");t.innerHTML=e.name,t.classList.add("review-author");var r=document.createElement("span");r.innerHTML=e.date,r.classList.add("review-date"),t.appendChild(r),n.appendChild(t);var a=document.createElement("p");a.innerHTML="Rating: "+e.rating,a.classList.add("review-rating"),n.appendChild(a);var i=document.createElement("p");return i.innerHTML=e.comments,i.classList.add("review-comments"),n.appendChild(i),n},fillBreadcrumb=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant,n=document.getElementById("breadcrumb");if(n.childNodes.length<4){var t=document.createElement("li");t.innerHTML=e.name,n.appendChild(t)}},getParameterByName=function(e,n){n||(n=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var t=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(n);return t?t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):"":null};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlc3RhdXJhbnRfaW5mby5qcyJdLCJuYW1lcyI6WyJyZXN0YXVyYW50Iiwid2luZG93IiwiaW5pdE1hcCIsImVycm9yIiwiZmV0Y2hSZXN0YXVyYW50RnJvbVVSTCIsImNvbnNvbGUiLCJzZWxmIiwibWFwIiwiZ29vZ2xlIiwibWFwcyIsIk1hcCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJ6b29tIiwibGF0bG5nIiwiY2VudGVyIiwiZmlsbEJyZWFkY3J1bWIiLCJjYWxsYmFjayIsImlkIiwiZ2V0UGFyYW1ldGVyQnlOYW1lIiwiREJIZWxwZXIiLCJmZXRjaFJlc3RhdXJhbnRCeUlkIiwiZmlsbFJlc3RhdXJhbnRIVE1MIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwibmFtZSIsImlubmVySFRNTCIsImFkZHJlc3MiLCJpbWFnZSIsImNsYXNzTmFtZSIsImZpZ2NhcCIsInNyYyIsInNsaWNlIiwic3Jjc2V0Iiwib3JpZ0ltZyIsInNpemVzIiwiY3Vpc2luZV90eXBlIiwiZmlsbFJlc3RhdXJhbnRIb3Vyc0hUTUwiLCJmaWxsUmV2aWV3c0hUTUwiLCJvcGVyYXRpbmdIb3VycyIsIm9wZXJhdGluZ19ob3VycyIsImhvdXJzIiwicm93IiwiY3JlYXRlRWxlbWVudCIsImFwcGVuZENoaWxkIiwiZGF5IiwidGltZSIsImtleSIsInJldmlld3MiLCJjb250YWluZXIiLCJjaGlsZE5vZGVzIiwidGl0bGUiLCJub1Jldmlld3MiLCJ1bCIsImNyZWF0ZVJldmlld0hUTUwiLCJyZXZpZXciLCJsaSIsImFkZCIsImRhdGUiLCJjbGFzc0xpc3QiLCJyYXRpbmciLCJjb21tZW50cyIsImJyZWFkY3J1bWIiLCJ1cmwiLCJsb2NhdGlvbiIsImhyZWYiLCJyZXBsYWNlIiwicmVzdWx0cyIsInJlZ2V4Il0sIm1hcHBpbmdzIjoiQUFBQSxhQUNBLElBQUlBLElBQUFBLGdCQUFBQSxFQU1KQyxPQUFPQyxRQUFVLFdBQWpCRCx1QkFBaUIsU0FBQUUsRUFB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OlsiJ3VzZSBzdHJpY3QnO1xubGV0IHJlc3RhdXJhbnQ7XG52YXIgbWFwO1xuXG4vKipcbiAqIEluaXRpYWxpemUgR29vZ2xlIG1hcCwgY2FsbGVkIGZyb20gSFRNTC5cbiAqL1xud2luZG93LmluaXRNYXAgPSAoKSA9PiB7XG4gIGZldGNoUmVzdGF1cmFudEZyb21VUkwoKGVycm9yLCByZXN0YXVyYW50KSA9PiB7XG4gICAgaWYgKGVycm9yKSB7XG4gICAgICAvLyBHb3QgYW4gZXJyb3IhXG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2VsZi5tYXAgPSBuZXcgZ29vZ2xlLm1hcHMuTWFwKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAnKSwge1xuICAgICAgICB6b29tOiAxNixcbiAgICAgICAgY2VudGVyOiByZXN0YXVyYW50LmxhdGxuZyxcbiAgICAgICAgc2Nyb2xsd2hlZWw6IGZhbHNlXG4gICAgICB9KTtcbiAgICAgIGZpbGxCcmVhZGNydW1iKCk7XG4gICAgICBEQkhlbHBlci5tYXBNYXJrZXJGb3JSZXN0YXVyYW50KHNlbGYucmVzdGF1cmFudCwgc2VsZi5tYXApO1xuICAgIH1cbiAgfSk7XG59O1xuXG4vKipcbiAqIEdldCBjdXJyZW50IHJlc3RhdXJhbnQgZnJvbSBwYWdlIFVSTC5cbiAqL1xuY29uc3QgZmV0Y2hSZXN0YXVyYW50RnJvbVVSTCA9IGNhbGxiYWNrID0+IHtcbiAgaWYgKHNlbGYucmVzdGF1cmFudCkge1xuICAgIC8vIHJlc3RhdXJhbnQgYWxyZWFkeSBmZXRjaGVkIVxuICAgIGNhbGxiYWNrKG51bGwsIHNlbGYucmVzdGF1cmFudCk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IGlkID0gZ2V0UGFyYW1ldGVyQnlOYW1lKCdpZCcpO1xuICBpZiAoIWlkKSB7XG4gICAgLy8gbm8gaWQgZm91bmQgaW4gVVJMXG4gICAgZXJyb3IgPSAnTm8gcmVzdGF1cmFudCBpZCBpbiBVUkwnO1xuICAgIGNhbGxiYWNrKGVycm9yLCBudWxsKTtcbiAgfSBlbHNlIHtcbiAgICBEQkhlbHBlci5mZXRjaFJlc3RhdXJhbnRCeUlkKGlkLCAoZXJyb3IsIHJlc3RhdXJhbnQpID0+IHtcbiAgICAgIHNlbGYucmVzdGF1cmFudCA9IHJlc3RhdXJhbnQ7XG4gICAgICBpZiAoIXJlc3RhdXJhbnQpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGZpbGxSZXN0YXVyYW50SFRNTCgpO1xuICAgICAgY2FsbGJhY2sobnVsbCwgcmVzdGF1cmFudCk7XG4gICAgfSk7XG4gIH1cbn07XG5cbi8qKlxuICogQ3JlYXRlIHJlc3RhdXJhbnQgSFRNTCBhbmQgYWRkIGl0IHRvIHRoZSB3ZWJwYWdlXG4gKi9cbmNvbnN0IGZpbGxSZXN0YXVyYW50SFRNTCA9IChyZXN0YXVyYW50ID0gc2VsZi5yZXN0YXVyYW50KSA9PiB7XG4gIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudC1uYW1lJyk7XG4gIG5hbWUuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5uYW1lO1xuXG4gIGNvbnN0IGFkZHJlc3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudC1hZGRyZXNzJyk7XG4gIGFkZHJlc3MuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5hZGRyZXNzO1xuXG4gIGNvbnN0IGltYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnQtaW1nJyk7XG4gIGNvbnN0IGZpZ2NhcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50LWZpZ2NhcCcpO1xuICBpbWFnZS5jbGFzc05hbWUgPSAncmVzdGF1cmFudC1pbWcnO1xuICBpbWFnZS5zcmMgPSBEQkhlbHBlci5pbWFnZVVybEZvclJlc3RhdXJhbnQocmVzdGF1cmFudCk7XG4gIGltYWdlLmFsdCA9IGBBbiBpbXByZXNzaW9uIG9mIHJlc3RhdXJhbnQgJHtyZXN0YXVyYW50Lm5hbWV9YDtcbiAgZmlnY2FwLmlubmVySFRNTCA9IGBSZXN0YXVyYW50ICR7cmVzdGF1cmFudC5uYW1lfWA7XG5cbiAgLy8gc3Jjc2V0OiBzZXJ2aW5nIHRoZSByaWdodCBpbWcgc2l6ZSB0byB0aGUgcmlnaHQgdmlld3BvcnQgd2lkdGhcbiAgY29uc3Qgb3JpZ0ltZyA9IGltYWdlLnNyYy5zbGljZSgwLCAtMTcpO1xuICBpbWFnZS5zcmNzZXQgPSBgJHtvcmlnSW1nfS0yNTBfc21hbGwtbWluLndlYnAgMjUwdyxcbiAgICAgICAgICAgICAgICAgICR7b3JpZ0ltZ30tNDAwX21lZGl1bS1taW4ud2VicCA0MDB3LFxuICAgICAgICAgICAgICAgICAgJHtvcmlnSW1nfS02MDBfbGFyZ2UtbWluLndlYnAgNjAwdyxcbiAgICAgICAgICAgICAgICAgICR7b3JpZ0ltZ30tODAwX29yaWctbWluLndlYnAgODAwd1xuICAgICAgICAgICAgICAgICAgYDtcbiAgaW1hZ2Uuc2l6ZXMgPSBgOTB2d2A7XG5cbiAgY29uc3QgY3Vpc2luZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50LWN1aXNpbmUnKTtcbiAgY3Vpc2luZS5pbm5lckhUTUwgPSByZXN0YXVyYW50LmN1aXNpbmVfdHlwZTtcblxuICAvLyBmaWxsIG9wZXJhdGluZyBob3Vyc1xuICBpZiAocmVzdGF1cmFudC5vcGVyYXRpbmdfaG91cnMpIHtcbiAgICBmaWxsUmVzdGF1cmFudEhvdXJzSFRNTCgpO1xuICB9XG4gIC8vIGZpbGwgcmV2aWV3c1xuICBmaWxsUmV2aWV3c0hUTUwoKTtcbn07XG5cbi8qKlxuICogQ3JlYXRlIHJlc3RhdXJhbnQgb3BlcmF0aW5nIGhvdXJzIEhUTUwgdGFibGUgYW5kIGFkZCBpdCB0byB0aGUgd2VicGFnZS5cbiAqL1xuY29uc3QgZmlsbFJlc3RhdXJhbnRIb3Vyc0hUTUwgPSAoXG4gIG9wZXJhdGluZ0hvdXJzID0gc2VsZi5yZXN0YXVyYW50Lm9wZXJhdGluZ19ob3Vyc1xuKSA9PiB7XG4gIGNvbnN0IGhvdXJzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnQtaG91cnMnKTtcbiAgZm9yIChsZXQga2V5IGluIG9wZXJhdGluZ0hvdXJzKSB7XG4gICAgY29uc3Qgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTtcblxuICAgIGNvbnN0IGRheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XG4gICAgZGF5LmlubmVySFRNTCA9IGtleTtcbiAgICByb3cuYXBwZW5kQ2hpbGQoZGF5KTtcblxuICAgIGNvbnN0IHRpbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xuICAgIHRpbWUuaW5uZXJIVE1MID0gb3BlcmF0aW5nSG91cnNba2V5XTtcbiAgICByb3cuYXBwZW5kQ2hpbGQodGltZSk7XG5cbiAgICBob3Vycy5hcHBlbmRDaGlsZChyb3cpO1xuICB9XG59O1xuXG4vKipcbiAqIENyZWF0ZSBhbGwgcmV2aWV3cyBIVE1MIGFuZCBhZGQgdGhlbSB0byB0aGUgd2VicGFnZS5cbiAqL1xuY29uc3QgZmlsbFJldmlld3NIVE1MID0gKHJldmlld3MgPSBzZWxmLnJlc3RhdXJhbnQucmV2aWV3cykgPT4ge1xuICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV2aWV3cy1jb250YWluZXInKTtcbiAgaWYgKGNvbnRhaW5lci5jaGlsZE5vZGVzLmxlbmd0aCA8IDQpIHtcbiAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gyJyk7XG4gICAgdGl0bGUuaW5uZXJIVE1MID0gJ1Jldmlld3MnO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aXRsZSk7XG4gIH1cbiAgaWYgKCFyZXZpZXdzKSB7XG4gICAgY29uc3Qgbm9SZXZpZXdzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgIG5vUmV2aWV3cy5pbm5lckhUTUwgPSAnTm8gcmV2aWV3cyB5ZXQhJztcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQobm9SZXZpZXdzKTtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgdWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV2aWV3cy1saXN0Jyk7XG4gIHJldmlld3MuZm9yRWFjaChyZXZpZXcgPT4ge1xuICAgIHVsLmFwcGVuZENoaWxkKGNyZWF0ZVJldmlld0hUTUwocmV2aWV3KSk7XG4gIH0pO1xuICBjb250YWluZXIuYXBwZW5kQ2hpbGQodWwpO1xufTtcblxuLyoqXG4gKiBDcmVhdGUgcmV2aWV3IEhUTUwgYW5kIGFkZCBpdCB0byB0aGUgd2VicGFnZS5cbiAqL1xuY29uc3QgY3JlYXRlUmV2aWV3SFRNTCA9IHJldmlldyA9PiB7XG4gIGNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgbmFtZS5pbm5lckhUTUwgPSByZXZpZXcubmFtZTtcbiAgbmFtZS5jbGFzc0xpc3QuYWRkKCdyZXZpZXctYXV0aG9yJyk7XG5cbiAgLy8gRGF0ZSBpcyBub3cgYSBzcGFuIGluc2lkZSB0aGUgcmV2aWV3ZXIncyBuYW1lXG4gIGNvbnN0IGRhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gIGRhdGUuaW5uZXJIVE1MID0gcmV2aWV3LmRhdGU7XG4gIGRhdGUuY2xhc3NMaXN0LmFkZCgncmV2aWV3LWRhdGUnKTtcbiAgbmFtZS5hcHBlbmRDaGlsZChkYXRlKTtcblxuICBsaS5hcHBlbmRDaGlsZChuYW1lKTtcblxuICBjb25zdCByYXRpbmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gIHJhdGluZy5pbm5lckhUTUwgPSBgUmF0aW5nOiAke3Jldmlldy5yYXRpbmd9YDtcbiAgcmF0aW5nLmNsYXNzTGlzdC5hZGQoJ3Jldmlldy1yYXRpbmcnKTtcbiAgbGkuYXBwZW5kQ2hpbGQocmF0aW5nKTtcblxuICBjb25zdCBjb21tZW50cyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgY29tbWVudHMuaW5uZXJIVE1MID0gcmV2aWV3LmNvbW1lbnRzO1xuICBjb21tZW50cy5jbGFzc0xpc3QuYWRkKCdyZXZpZXctY29tbWVudHMnKTtcbiAgbGkuYXBwZW5kQ2hpbGQoY29tbWVudHMpO1xuXG4gIHJldHVybiBsaTtcbn07XG5cbi8qKlxuICogQWRkIHJlc3RhdXJhbnQgbmFtZSB0byB0aGUgYnJlYWRjcnVtYiBuYXZpZ2F0aW9uIG1lbnVcbiAqL1xuY29uc3QgZmlsbEJyZWFkY3J1bWIgPSAocmVzdGF1cmFudCA9IHNlbGYucmVzdGF1cmFudCkgPT4ge1xuICBjb25zdCBicmVhZGNydW1iID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JyZWFkY3J1bWInKTtcbiAgaWYgKGJyZWFkY3J1bWIuY2hpbGROb2Rlcy5sZW5ndGggPCA0KSB7XG4gICAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgIGxpLmlubmVySFRNTCA9IHJlc3RhdXJhbnQubmFtZTtcbiAgICBicmVhZGNydW1iLmFwcGVuZENoaWxkKGxpKTtcbiAgfVxufTtcblxuLyoqXG4gKiBHZXQgYSBwYXJhbWV0ZXIgYnkgbmFtZSBmcm9tIHBhZ2UgVVJMLlxuICovXG5jb25zdCBnZXRQYXJhbWV0ZXJCeU5hbWUgPSAobmFtZSwgdXJsKSA9PiB7XG4gIGlmICghdXJsKSB1cmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcbiAgbmFtZSA9IG5hbWUucmVwbGFjZSgvW1xcW1xcXV0vZywgJ1xcXFwkJicpO1xuICBjb25zdCByZWdleCA9IG5ldyBSZWdFeHAoYFs/Jl0ke25hbWV9KD0oW14mI10qKXwmfCN8JClgKSxcbiAgICByZXN1bHRzID0gcmVnZXguZXhlYyh1cmwpO1xuICBpZiAoIXJlc3VsdHMpIHJldHVybiBudWxsO1xuICBpZiAoIXJlc3VsdHNbMl0pIHJldHVybiAnJztcbiAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChyZXN1bHRzWzJdLnJlcGxhY2UoL1xcKy9nLCAnICcpKTtcbn07XG4iXX0=
