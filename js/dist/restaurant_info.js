"use strict";var map,restaurant=void 0;window.initMap=function(){fetchRestaurantFromURL(function(e,n){e||(self.map=new google.maps.Map(document.getElementById("map"),{zoom:16,center:n.latlng,scrollwheel:!1}),fillBreadcrumb(),DBHelper.mapMarkerForRestaurant(self.restaurant,self.map))})};var fetchRestaurantFromURL=function(t){if(self.restaurant)t(null,self.restaurant);else{var e=getParameterByName("id");e?DBHelper.fetchRestaurantById(e,function(e,n){(self.restaurant=n)&&(fillRestaurantHTML(),t(null,n))}):(error="No restaurant id in URL",t(error,null))}},fillRestaurantHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant;document.getElementById("restaurant-name").innerHTML=e.name,document.getElementById("restaurant-address").innerHTML=e.address;var n=document.getElementById("restaurant-img"),t=document.getElementById("restaurant-figcap");n.className="restaurant-img",n.src=DBHelper.imageUrlForRestaurant(e),n.alt="An impression of restaurant "+e.name,t.innerHTML="Restaurant "+e.name;var r=n.src.slice(0,-17);n.srcset=r+"-250_small-min.webp 250w,\n                  "+r+"-400_medium-min.webp 400w,\n                  "+r+"-600_large-min.webp 600w,\n                  "+r+"-800_orig-min.webp 800w\n                  ",n.sizes="90vw",document.getElementById("restaurant-cuisine").innerHTML=e.cuisine_type,e.operating_hours&&fillRestaurantHoursHTML(),fillReviewsHTML()},fillRestaurantHoursHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant.operating_hours,n=document.getElementById("restaurant-hours");for(var t in e){var r=document.createElement("tr"),a=document.createElement("td");a.innerHTML=t,r.appendChild(a);var i=document.createElement("td");i.innerHTML=e[t],r.appendChild(i),n.appendChild(r)}},fillReviewsHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant.reviews,n=document.getElementById("reviews-container");if(n.childNodes.length<4){var t=document.createElement("h2");t.innerHTML="Reviews",n.appendChild(t)}if(!e){var r=document.createElement("p");return r.innerHTML="No reviews yet!",void n.appendChild(r)}var a=document.getElementById("reviews-list");e.forEach(function(e){a.appendChild(createReviewHTML(e))}),n.appendChild(a)},createReviewHTML=function(e){var n=document.createElement("li"),t=document.createElement("p");t.innerHTML=e.name,t.classList.add("review-author");var r=document.createElement("span");r.innerHTML=e.date,r.classList.add("review-date"),t.appendChild(r),n.appendChild(t);var a=document.createElement("p");a.innerHTML="Rating: "+e.rating,a.classList.add("review-rating"),n.appendChild(a);var i=document.createElement("p");return i.innerHTML=e.comments,i.classList.add("review-comments"),n.appendChild(i),n},fillBreadcrumb=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant,n=document.getElementById("breadcrumb");if(n.childNodes.length<4){var t=document.createElement("li");t.innerHTML=e.name,n.appendChild(t)}},getParameterByName=function(e,n){n||(n=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var t=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(n);return t?t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):"":null};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlc3RhdXJhbnRfaW5mby5qcyJdLCJuYW1lcyI6WyJyZXN0YXVyYW50Iiwid2luZG93IiwiaW5pdE1hcCIsImVycm9yIiwiZmV0Y2hSZXN0YXVyYW50RnJvbVVSTCIsInNlbGYiLCJtYXAiLCJnb29nbGUiLCJtYXBzIiwiTWFwIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInpvb20iLCJsYXRsbmciLCJjZW50ZXIiLCJmaWxsQnJlYWRjcnVtYiIsImNhbGxiYWNrIiwiaWQiLCJnZXRQYXJhbWV0ZXJCeU5hbWUiLCJEQkhlbHBlciIsImZldGNoUmVzdGF1cmFudEJ5SWQiLCJmaWxsUmVzdGF1cmFudEhUTUwiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJuYW1lIiwiaW5uZXJIVE1MIiwiYWRkcmVzcyIsImltYWdlIiwiY2xhc3NOYW1lIiwiZmlnY2FwIiwic3JjIiwic2xpY2UiLCJzcmNzZXQiLCJvcmlnSW1nIiwic2l6ZXMiLCJjdWlzaW5lX3R5cGUiLCJmaWxsUmVzdGF1cmFudEhvdXJzSFRNTCIsImZpbGxSZXZpZXdzSFRNTCIsIm9wZXJhdGluZ0hvdXJzIiwib3BlcmF0aW5nX2hvdXJzIiwiaG91cnMiLCJyb3ciLCJjcmVhdGVFbGVtZW50IiwiYXBwZW5kQ2hpbGQiLCJkYXkiLCJ0aW1lIiwia2V5IiwicmV2aWV3cyIsImNvbnRhaW5lciIsImNoaWxkTm9kZXMiLCJ0aXRsZSIsIm5vUmV2aWV3cyIsInVsIiwiY3JlYXRlUmV2aWV3SFRNTCIsInJldmlldyIsImxpIiwiYWRkIiwiZGF0ZSIsImNsYXNzTGlzdCIsInJhdGluZyIsImNvbW1lbnRzIiwiYnJlYWRjcnVtYiIsInVybCIsImxvY2F0aW9uIiwiaHJlZiIsInJlcGxhY2UiLCJyZXN1bHRzIiwicmVnZXgiXSwibWFwcGluZ3MiOiJBQUFBLGFBQ0EsSUFBSUEsSUFBQUEsZ0JBQUFBLEVBTUpDLE9BQU9DLFFBQVUsV0FBakJELHVCQUFpQixTQUFBRSxFQUFNSCxHQUNyQkks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aUJGLGlCQUdqQixJQUFBRyxFQUFBaEQsU0FBQWlDLGNBQUEsUUFDQWUsRUFBTUEsVUFBT2hELEVBQVNpQyxLQUN0QmUsRUFBS2hDLFVBQUwrQixJQUFpQkYsZUFDakJHLEVBQUtDLFlBQVVGLEdBR2ZELEVBQUdaLFlBQVluQixHQUVmLElBQU1tQyxFQUFTbEQsU0FBU2lDLGNBQWMsS0FBdENpQixFQUFNQSxVQUFOLFdBQXdCakIsRUFBY2lCLE9BQ3RDQSxFQUFPbEMsVUFBUCtCLElBQUEsaUJBQ0FHLEVBQUFBLFlBQU9ELEdBR1AsSUFBTUUsRUFBV25ELFNBQVNpQyxjQUFjLEtBS3hDLE9BTEFrQixFQUFNQSxVQUFXbkQsRUFBU2lDLFNBQzFCa0IsRUFBU25DLFVBQVQrQixJQUFxQkYsbUJBQ3JCTSxFQUFBQSxZQUFTRixHQUdGSCxHQU1IekMsZUFBaUIsV0FBa0MsSUFBakNmLEVBQWlDLEVBQUFzQixVQUFBQyxhQUFBQyxJQUFBRixVQUFBLEdBQUFBLFVBQUEsR0FBcEJqQixLQUFLTCxXQUFwQ2UsRUFBaUJMLFNBQWpCSyxlQUFpQixjQUFrQyxHQUFqQ2YsRUFBaUNrRCxXQUFBM0IsT0FBQSxFQUFBLENBR3JELElBQU1pQyxFQUFLOUMsU0FBU2lDLGNBQWMsTUFGcENhLEVBQU1NLFVBQWFwRCxFQUFTQyxLQUM1Qm1ELEVBQUlBLFlBQUFOLEtBT050QyxtQkFBQSxTQUFBTyxFQUFBc0MsR0FJT0EsSUFBS0EsRUFBTTlELE9BQU8rRCxTQUFTQyxNQUNoQ3hDLEVBQU9BLEVBQUt5QyxRQUFRLFVBQVcsUUFGakMsSUFDRUMsRUFESWpELElBQUFBLE9BQUFBLE9BQUFBLEVBQUFBLHFCQUNZakIsS0FBTytELEdBQ3ZCdkMsT0FBQUEsRUFDTTJDLEVBQVEsR0FDWkQsbUJBQXFCSixFQUR2QixHQUFBRyxRQUFBLE1BQUEsTUFBYyxHQURNIiwiZmlsZSI6InJlc3RhdXJhbnRfaW5mby5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcbmxldCByZXN0YXVyYW50O1xudmFyIG1hcDtcblxuLyoqXG4gKiBJbml0aWFsaXplIEdvb2dsZSBtYXAsIGNhbGxlZCBmcm9tIEhUTUwuXG4gKi9cbndpbmRvdy5pbml0TWFwID0gKCkgPT4ge1xuICBmZXRjaFJlc3RhdXJhbnRGcm9tVVJMKChlcnJvciwgcmVzdGF1cmFudCkgPT4ge1xuICAgIGlmIChlcnJvcikge1xuICAgICAgLy8gR290IGFuIGVycm9yIVxuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNlbGYubWFwID0gbmV3IGdvb2dsZS5tYXBzLk1hcChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwJyksIHtcbiAgICAgICAgem9vbTogMTYsXG4gICAgICAgIGNlbnRlcjogcmVzdGF1cmFudC5sYXRsbmcsXG4gICAgICAgIHNjcm9sbHdoZWVsOiBmYWxzZVxuICAgICAgfSk7XG4gICAgICBmaWxsQnJlYWRjcnVtYigpO1xuICAgICAgREJIZWxwZXIubWFwTWFya2VyRm9yUmVzdGF1cmFudChzZWxmLnJlc3RhdXJhbnQsIHNlbGYubWFwKTtcbiAgICB9XG4gIH0pO1xufTtcblxuLyoqXG4gKiBHZXQgY3VycmVudCByZXN0YXVyYW50IGZyb20gcGFnZSBVUkwuXG4gKi9cbmNvbnN0IGZldGNoUmVzdGF1cmFudEZyb21VUkwgPSBjYWxsYmFjayA9PiB7XG4gIGlmIChzZWxmLnJlc3RhdXJhbnQpIHtcbiAgICAvLyByZXN0YXVyYW50IGFscmVhZHkgZmV0Y2hlZCFcbiAgICBjYWxsYmFjayhudWxsLCBzZWxmLnJlc3RhdXJhbnQpO1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBpZCA9IGdldFBhcmFtZXRlckJ5TmFtZSgnaWQnKTtcbiAgaWYgKCFpZCkge1xuICAgIC8vIG5vIGlkIGZvdW5kIGluIFVSTFxuICAgIGVycm9yID0gJ05vIHJlc3RhdXJhbnQgaWQgaW4gVVJMJztcbiAgICBjYWxsYmFjayhlcnJvciwgbnVsbCk7XG4gIH0gZWxzZSB7XG4gICAgREJIZWxwZXIuZmV0Y2hSZXN0YXVyYW50QnlJZChpZCwgKGVycm9yLCByZXN0YXVyYW50KSA9PiB7XG4gICAgICBzZWxmLnJlc3RhdXJhbnQgPSByZXN0YXVyYW50O1xuICAgICAgaWYgKCFyZXN0YXVyYW50KSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBmaWxsUmVzdGF1cmFudEhUTUwoKTtcbiAgICAgIGNhbGxiYWNrKG51bGwsIHJlc3RhdXJhbnQpO1xuICAgIH0pO1xuICB9XG59O1xuXG4vKipcbiAqIENyZWF0ZSByZXN0YXVyYW50IEhUTUwgYW5kIGFkZCBpdCB0byB0aGUgd2VicGFnZVxuICovXG5jb25zdCBmaWxsUmVzdGF1cmFudEhUTUwgPSAocmVzdGF1cmFudCA9IHNlbGYucmVzdGF1cmFudCkgPT4ge1xuICBjb25zdCBuYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnQtbmFtZScpO1xuICBuYW1lLmlubmVySFRNTCA9IHJlc3RhdXJhbnQubmFtZTtcblxuICBjb25zdCBhZGRyZXNzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnQtYWRkcmVzcycpO1xuICBhZGRyZXNzLmlubmVySFRNTCA9IHJlc3RhdXJhbnQuYWRkcmVzcztcblxuICBjb25zdCBpbWFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50LWltZycpO1xuICBjb25zdCBmaWdjYXAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudC1maWdjYXAnKTtcbiAgaW1hZ2UuY2xhc3NOYW1lID0gJ3Jlc3RhdXJhbnQtaW1nJztcbiAgaW1hZ2Uuc3JjID0gREJIZWxwZXIuaW1hZ2VVcmxGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQpO1xuICBpbWFnZS5hbHQgPSBgQW4gaW1wcmVzc2lvbiBvZiByZXN0YXVyYW50ICR7cmVzdGF1cmFudC5uYW1lfWA7XG4gIGZpZ2NhcC5pbm5lckhUTUwgPSBgUmVzdGF1cmFudCAke3Jlc3RhdXJhbnQubmFtZX1gO1xuXG4gIC8vIHNyY3NldDogc2VydmluZyB0aGUgcmlnaHQgaW1nIHNpemUgdG8gdGhlIHJpZ2h0IHZpZXdwb3J0IHdpZHRoXG4gIGNvbnN0IG9yaWdJbWcgPSBpbWFnZS5zcmMuc2xpY2UoMCwgLTE3KTtcbiAgaW1hZ2Uuc3Jjc2V0ID0gYCR7b3JpZ0ltZ30tMjUwX3NtYWxsLW1pbi53ZWJwIDI1MHcsXG4gICAgICAgICAgICAgICAgICAke29yaWdJbWd9LTQwMF9tZWRpdW0tbWluLndlYnAgNDAwdyxcbiAgICAgICAgICAgICAgICAgICR7b3JpZ0ltZ30tNjAwX2xhcmdlLW1pbi53ZWJwIDYwMHcsXG4gICAgICAgICAgICAgICAgICAke29yaWdJbWd9LTgwMF9vcmlnLW1pbi53ZWJwIDgwMHdcbiAgICAgICAgICAgICAgICAgIGA7XG4gIGltYWdlLnNpemVzID0gYDkwdndgO1xuXG4gIGNvbnN0IGN1aXNpbmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudC1jdWlzaW5lJyk7XG4gIGN1aXNpbmUuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5jdWlzaW5lX3R5cGU7XG5cbiAgLy8gZmlsbCBvcGVyYXRpbmcgaG91cnNcbiAgaWYgKHJlc3RhdXJhbnQub3BlcmF0aW5nX2hvdXJzKSB7XG4gICAgZmlsbFJlc3RhdXJhbnRIb3Vyc0hUTUwoKTtcbiAgfVxuICAvLyBmaWxsIHJldmlld3NcbiAgZmlsbFJldmlld3NIVE1MKCk7XG59O1xuXG4vKipcbiAqIENyZWF0ZSByZXN0YXVyYW50IG9wZXJhdGluZyBob3VycyBIVE1MIHRhYmxlIGFuZCBhZGQgaXQgdG8gdGhlIHdlYnBhZ2UuXG4gKi9cbmNvbnN0IGZpbGxSZXN0YXVyYW50SG91cnNIVE1MID0gKFxuICBvcGVyYXRpbmdIb3VycyA9IHNlbGYucmVzdGF1cmFudC5vcGVyYXRpbmdfaG91cnNcbikgPT4ge1xuICBjb25zdCBob3VycyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50LWhvdXJzJyk7XG4gIGZvciAobGV0IGtleSBpbiBvcGVyYXRpbmdIb3Vycykge1xuICAgIGNvbnN0IHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XG5cbiAgICBjb25zdCBkYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xuICAgIGRheS5pbm5lckhUTUwgPSBrZXk7XG4gICAgcm93LmFwcGVuZENoaWxkKGRheSk7XG5cbiAgICBjb25zdCB0aW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcbiAgICB0aW1lLmlubmVySFRNTCA9IG9wZXJhdGluZ0hvdXJzW2tleV07XG4gICAgcm93LmFwcGVuZENoaWxkKHRpbWUpO1xuXG4gICAgaG91cnMuYXBwZW5kQ2hpbGQocm93KTtcbiAgfVxufTtcblxuLyoqXG4gKiBDcmVhdGUgYWxsIHJldmlld3MgSFRNTCBhbmQgYWRkIHRoZW0gdG8gdGhlIHdlYnBhZ2UuXG4gKi9cbmNvbnN0IGZpbGxSZXZpZXdzSFRNTCA9IChyZXZpZXdzID0gc2VsZi5yZXN0YXVyYW50LnJldmlld3MpID0+IHtcbiAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jldmlld3MtY29udGFpbmVyJyk7XG4gIGlmIChjb250YWluZXIuY2hpbGROb2Rlcy5sZW5ndGggPCA0KSB7XG4gICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMicpO1xuICAgIHRpdGxlLmlubmVySFRNTCA9ICdSZXZpZXdzJztcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQodGl0bGUpO1xuICB9XG4gIGlmICghcmV2aWV3cykge1xuICAgIGNvbnN0IG5vUmV2aWV3cyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICBub1Jldmlld3MuaW5uZXJIVE1MID0gJ05vIHJldmlld3MgeWV0ISc7XG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKG5vUmV2aWV3cyk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IHVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jldmlld3MtbGlzdCcpO1xuICByZXZpZXdzLmZvckVhY2gocmV2aWV3ID0+IHtcbiAgICB1bC5hcHBlbmRDaGlsZChjcmVhdGVSZXZpZXdIVE1MKHJldmlldykpO1xuICB9KTtcbiAgY29udGFpbmVyLmFwcGVuZENoaWxkKHVsKTtcbn07XG5cbi8qKlxuICogQ3JlYXRlIHJldmlldyBIVE1MIGFuZCBhZGQgaXQgdG8gdGhlIHdlYnBhZ2UuXG4gKi9cbmNvbnN0IGNyZWF0ZVJldmlld0hUTUwgPSByZXZpZXcgPT4ge1xuICBjb25zdCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gIG5hbWUuaW5uZXJIVE1MID0gcmV2aWV3Lm5hbWU7XG4gIG5hbWUuY2xhc3NMaXN0LmFkZCgncmV2aWV3LWF1dGhvcicpO1xuXG4gIC8vIERhdGUgaXMgbm93IGEgc3BhbiBpbnNpZGUgdGhlIHJldmlld2VyJ3MgbmFtZVxuICBjb25zdCBkYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICBkYXRlLmlubmVySFRNTCA9IHJldmlldy5kYXRlO1xuICBkYXRlLmNsYXNzTGlzdC5hZGQoJ3Jldmlldy1kYXRlJyk7XG4gIG5hbWUuYXBwZW5kQ2hpbGQoZGF0ZSk7XG5cbiAgbGkuYXBwZW5kQ2hpbGQobmFtZSk7XG5cbiAgY29uc3QgcmF0aW5nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICByYXRpbmcuaW5uZXJIVE1MID0gYFJhdGluZzogJHtyZXZpZXcucmF0aW5nfWA7XG4gIHJhdGluZy5jbGFzc0xpc3QuYWRkKCdyZXZpZXctcmF0aW5nJyk7XG4gIGxpLmFwcGVuZENoaWxkKHJhdGluZyk7XG5cbiAgY29uc3QgY29tbWVudHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gIGNvbW1lbnRzLmlubmVySFRNTCA9IHJldmlldy5jb21tZW50cztcbiAgY29tbWVudHMuY2xhc3NMaXN0LmFkZCgncmV2aWV3LWNvbW1lbnRzJyk7XG4gIGxpLmFwcGVuZENoaWxkKGNvbW1lbnRzKTtcblxuICByZXR1cm4gbGk7XG59O1xuXG4vKipcbiAqIEFkZCByZXN0YXVyYW50IG5hbWUgdG8gdGhlIGJyZWFkY3J1bWIgbmF2aWdhdGlvbiBtZW51XG4gKi9cbmNvbnN0IGZpbGxCcmVhZGNydW1iID0gKHJlc3RhdXJhbnQgPSBzZWxmLnJlc3RhdXJhbnQpID0+IHtcbiAgY29uc3QgYnJlYWRjcnVtYiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdicmVhZGNydW1iJyk7XG4gIGlmIChicmVhZGNydW1iLmNoaWxkTm9kZXMubGVuZ3RoIDwgNCkge1xuICAgIGNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICBsaS5pbm5lckhUTUwgPSByZXN0YXVyYW50Lm5hbWU7XG4gICAgYnJlYWRjcnVtYi5hcHBlbmRDaGlsZChsaSk7XG4gIH1cbn07XG5cbi8qKlxuICogR2V0IGEgcGFyYW1ldGVyIGJ5IG5hbWUgZnJvbSBwYWdlIFVSTC5cbiAqL1xuY29uc3QgZ2V0UGFyYW1ldGVyQnlOYW1lID0gKG5hbWUsIHVybCkgPT4ge1xuICBpZiAoIXVybCkgdXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XG4gIG5hbWUgPSBuYW1lLnJlcGxhY2UoL1tcXFtcXF1dL2csICdcXFxcJCYnKTtcbiAgY29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKGBbPyZdJHtuYW1lfSg9KFteJiNdKil8JnwjfCQpYCksXG4gICAgcmVzdWx0cyA9IHJlZ2V4LmV4ZWModXJsKTtcbiAgaWYgKCFyZXN1bHRzKSByZXR1cm4gbnVsbDtcbiAgaWYgKCFyZXN1bHRzWzJdKSByZXR1cm4gJyc7XG4gIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQocmVzdWx0c1syXS5yZXBsYWNlKC9cXCsvZywgJyAnKSk7XG59O1xuIl19
