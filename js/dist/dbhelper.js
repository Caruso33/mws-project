class DBHelper{static get DATABASE_URL(){return"http://localhost:1337"}static async fetchRestaurants(t){try{const e=await JSON.parse(window.localStorage.getItem("restaurantsJson"));if(e)return t(null,e);{const e=await fetch(`${DBHelper.DATABASE_URL}/restaurants`),a=await e.json();t(null,a),window.localStorage.setItem("restaurantsJson",JSON.stringify(a))}}catch(e){t(e.message,null)}}static async fetchRestaurantById(t,e){try{const a=await JSON.parse(window.localStorage.getItem(`restaurantJson?id=${t}`));if(a)return e(null,a);{const a=await fetch(`${DBHelper.DATABASE_URL}/restaurants/${t}`);if(a){const s=await a.json();return window.localStorage.setItem(`restaurantJson?id=${t}`,JSON.stringify(s)),e(null,s)}return e("Restaurant does not exist",null)}}catch(t){e(t.message,null)}}static async fetchRestaurantReviewsById(t,e){try{const a=await JSON.parse(window.localStorage.getItem(`reviewsJson?id=${t}`));if(a)return e(null,a);{const a=await fetch(`${DBHelper.DATABASE_URL}/reviews/?restaurant_id=${t}`),s=await a.json();return window.localStorage.setItem(`reviewsJson?id=${t}`,JSON.stringify(s)),e(null,s)}}catch(t){e(t.message,null)}}static fetchRestaurantByCuisine(t,e){DBHelper.fetchRestaurants((a,s)=>{if(a)e(a,null);else{const a=s.filter(e=>e.cuisine_type==t);e(null,a)}})}static fetchRestaurantByNeighborhood(t,e){DBHelper.fetchRestaurants((a,s)=>{if(a)e(a,null);else{const a=s.filter(e=>e.neighborhood==t);e(null,a)}})}static fetchRestaurantByCuisineAndNeighborhood(t,e,a){DBHelper.fetchRestaurants((s,n)=>{if(s)a(s,null);else{let s=n;"all"!=t&&(s=s.filter(e=>e.cuisine_type==t)),"all"!=e&&(s=s.filter(t=>t.neighborhood==e)),a(null,s)}})}static fetchNeighborhoods(t){DBHelper.fetchRestaurants((e,a)=>{if(e)t(e,null);else{const e=a.map((t,e)=>a[e].neighborhood),s=e.filter((t,a)=>e.indexOf(t)==a);t(null,s)}})}static fetchCuisines(t){DBHelper.fetchRestaurants((e,a)=>{if(e)t(e,null);else{const e=a.map((t,e)=>a[e].cuisine_type),s=e.filter((t,a)=>e.indexOf(t)==a);t(null,s)}})}static urlForRestaurant(t){return`./restaurant.html?id=${t.id}`}static imageUrlForRestaurant(t){return`/img/webp/${t.id}-placeholder.webp`}static mapMarkerForRestaurant(t,e){return new google.maps.Marker({position:t.latlng,title:t.name,url:DBHelper.urlForRestaurant(t),map:e,animation:google.maps.Animation.DROP})}}